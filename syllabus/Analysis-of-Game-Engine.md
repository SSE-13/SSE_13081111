# 游戏引擎分析课程教学大纲

英文名称：Analysis of Game Engine

课程编号：0007468

课程类型：学科基础选修课

学时： 32  学分：2

适用对象：数字媒体技术专业三年级本科生

先修课程：线性代数、数据结构与算法、计算机图形学、游戏开发基础

使用教材及参考书：

[1]	Jason Gregory . Game Eingine Architect . 译：叶劲峰 . 北京：电子工业出版社 . 2014年1月出版

[2] 张鑫磊，杨啸，王建文，刘晨光 . Egret-HTML5游戏开发指南 . 北京：电子工业出版社. 2016年3月出版

## 课程简介


游戏引擎指的是为游戏开发准备的一系列可视化开发工具和可重用组件。
这些工具通过与开发环境进行集成，方便开发者简单、快速进行数据驱动方式的游戏开发。
其目的在于让游戏设计者能容易和快速地做出游戏应用，从而无需从零开始实现每一个技术细节。
游戏引擎被广泛应用于游戏开发、虚拟现实、富媒体交互等场景中。
在具体的工作中，不光需要掌握游戏引擎的使用方法，更需要对其架构及原理进行深入理解，
才能将其灵活运用及创新。

本课程根据数字媒体技术专业“科学与艺术结合”的专业特色定位，选择渲染原理、游戏主循环、
寻路算法、显示列表架构、数据驱动开发、引擎编辑器开发作为主要内容，讨论游戏引擎的架构设计原理与实现方式。

## 课程地位和教学目的

### 课程地位

本课程是数字媒体技术专业必修课。

本课程建立在游戏开发基础等课程后，引导学生在系统底层再认识游戏引擎，学习其设计原理、实现方式与优化技巧。
并以案例的形式，阐述线性代数、数据结构与算法、计算机图形学等学科基础课在游戏引擎中的应用。
给学生提供参与亲自动手设计实现一个的游戏引擎的机会，培养其工程意识、动手能力，并巩固学科基础课的教学目标。

### 教学目的

总的教学目标是，使学生掌握游戏引擎的基本理论、架构设计和核心原理。
该目标分解为以下子目标：

* 掌握渲染的基本原理，如渲染API、显示列表树遍历、矩阵运算与坐标变换等。
* 以 AStar 寻路算法为例，掌握启发式算法的基本原理，及在游戏 AI 中的应用。
* 结合面向对象编程原则与设计模式，掌握数据驱动开发的编程思想。
* 将理论知识转化为一个简单的游戏引擎实现，培养系统的全面能力和团队协作能力。

主要为毕业要求第3、4、5、6的实现提供支持。

对于毕业要求3，游戏引擎分析属于数字媒体技术专业的重要理论课程，
能够培养学生负责或参与数字媒体软件的设计、开发和测试，并具有运行和维护能力。

对于毕业要求4，通过讲解游戏引擎的底层原理，使得学生理解游戏引擎的核心机制与算法。
能够培养学生对游戏引擎的原理的深入研究、二次开发和创新的能力。

对于毕业要求5，通过讲解游戏引擎的架构设计，强调巩固面向对象编程原则与设计模式等软件工程理论，
并与数字艺术相结合，培养学生解决实际工程问题的能力。

对于毕业要求6，通过在课程中穿插讲解软件工程行业与游戏引擎从业者的名人轶事，
使学生理解游戏行业对社会和文化的影响，并理解应承担的社会责任。

### 课程教学内容及要求

1. 概论与基础知识

教学目的、课程基本内容、游戏引擎的定义、游戏开发团队的构成、JavaScript语言基础，集成开发环境、多人协作与版本控制工具
这部分从游戏开发团队的构成入手，阐述游戏行业的工程化分工协作的整体背景，
介绍游戏引擎的重要意义，引导学生自顶向下的考虑游戏引擎的全部内容。
介绍 JavaScript 编程语言与集成开发环境 VisualStudio Code。
同时介绍本软件工程的社会化分工、多人协作与版本控制工具，
以便学生以工程化的方法进行团队协作完成本课程的作业要求。

重点：游戏引擎的定义，游戏开发团队的构成，多人协作与版本控制工具
难点：正确运用集成开发环境和版本控制工具进行协同开发

2. 游戏渲染原理

计算机图形学复习，渲染上下文与API，帧频与游戏主循环，
矢量绘图渲染，文字渲染，位图渲染

这部分从计算机图形学入手，复习渲染上下文、API与渲染管线知识，然后阐述游戏帧频与主循环的关系。
并针对矢量绘图渲染、文字渲染和位图渲染进行面向对象的接口设计与实现。

重点：面向对象编程，文字渲染，位图渲染
难点：将面向对象的三大特征：继承、封装、多态正确的应用在游戏引擎的渲染接口设计上。

3. 游戏动画原理

动画原理复习，帧频与动画的关系，缓动算法，物理引擎初步知识。

这部分从游戏动画入手，首先介绍游戏帧频与动画的关系，
阐述为何电影/电视的帧频为24，而游戏要求达到60帧以及因此带来的技术挑战。
分别介绍使用缓动算法实现动画与使用物理引擎实现动画，并介绍其差异点和适用范围。


重点：缓动算法、物理引擎
难点：正确的理解缓动算法和物理引擎实现动画的区别和适用范围，实现一个简单的物理引擎。


4. 寻路算法

最优算法与启发式算法，Dijkstra算法，A*算法，WayPoint寻路与NavMesh寻路

这部分内容首先介绍最优算法与启发式算法的区别，向学生介绍启发式算法的概念与核心思路。
通过复习离散数学中学到的 Dijkstra算法，引出 A*算法，并介绍这两种算法的异同。
通过分析 Unity 中的寻路模块，讲解 WayPoint寻路和 NavMesh寻路。
并要求学生独立实现 A* 寻路算法

重点：
A*寻路算法，NavMesh寻路

难点：
正确的理解 A*寻路算法的核心流程，及估价函数在算法中的意义。


5. 显示列表架构

显示列表的概念，相对坐标系与全局坐标系，矩阵运算与空间变换的关系，显示列表树的遍历，矩阵乘法与空间变换，逆矩阵与坐标系转换

这部分内容首先介绍显示列表这一概念在游戏开发中的重要意义，以 Unity 引擎为例，讲解游戏引擎中的显示列表架构。
并要求学生独立实现一个简单的显示列表。

重点：
显示列表树的遍历，矩阵乘法与空间变换

难点：
将数据结构中的树遍历、线性代数中的矩阵运算与计算机图形学进行结合，独立实现显示列表。



6. 人机交互

人机交互概述，接口设计，碰撞检测，四叉树优化

这部分首先介绍人机交互的几种表现形式，然后以鼠标交互为例，实现事件的捕获、碰撞检测与处理反馈的完整流程，
并引入四叉树的概念，强调正确使用数据结构与算法对游戏引擎性能的影响。

重点：
事件的捕获、碰撞检测与处理反馈的完整流程

难点：
碰撞检测算法


7. 面向对象编程原则

开放闭合原则，里氏替换原则，依赖倒置原则，接口隔离原则，组合复用原则，单一职责原则

分析游戏引擎的核心代码，讲解游戏引擎是如何应用这六种编程原则解决实际工程中遇到的复杂问题。

重点：
面向对象六大编程原则在游戏引擎中的应用

难点：
将这六种原则应用实际工程中，并为软件质量带来切实的提升。


8. 游戏引擎客户端的实现

数据驱动的开发方式，桌面客户端开发技术，桌面客户端开发技巧与常用设计模式

剖析游戏引擎的数据驱动的开发方式，分析其设计理念和优缺点。使学生理解数据驱动开发是游戏引擎的基础架构。
学习桌面客户端开发技术，并实现一个简易的数据驱动模型的游戏引擎客户端。

重点：
数据驱动开发的思路，桌面客户端开发技术

难点：
如何理解数据驱动开发在游戏引擎中的应用。

## 教学环节的安排与要求

1. 课程讲授

课堂教学首先要使学生掌握课程教学内容中规定的一些基本概念、基本理论和基本方法。特别是通过讲授，使学生能够对这些基本概念和理论有更深入的理解，使之有能力将它们应用到一些问题的求解中。要注意对其中的一些基本方法的核心思想的分析，使学生能够掌握其关键。

积极探索和实践研究型教学。探索如何实现教师在对问题的求解中教，学生怎么在对未知的探索中学。从提出问题，到求解思路分析，再到用符号表示问题及其求解算法设计，进一步培养学生抽象表示问题的能力，强化对“一类”问题进行求解的意识；从系统的角度向学生展示编译系统，同时考虑各子系统的实现与联系、具体问题求解的计算机实现。通过不同级别对象的抽象和问题的分治，培养学生的系统意识和能力。

使用多媒体课件，配合板书和范例演示讲授课程内容。在授课过程中，可由常用的程序设计语言问题引出概念，自然进入相关内容的讲授。适当引导学生阅读外文书籍和资料，培养自学能力。

2. 作业

通过课外作业，引导学生检验学习效果，进一步掌握课堂讲述的内容。

作业的基本要求：

根据各章节的情况、每一章布置适量的课外作业，完成这些作业需要的知识覆盖课堂讲授内容。主要支持毕业要求3、4、5的实现。
本课程的作业要求在全球最大的代码协作平台 GitHub 上完成，以使学生了解软件行业的工程化团队协作方法。

具体作业要求：

本课程一共有8项作业，其中前7项为独立完成作业，第8项为团队协作完成作业。

* 编程语言，集成开发环境与版本控制工具

使学生熟悉 JavaScript ，VisualStudio Code 与 GitHub，为后续作业做准备。

* 游戏渲染原理

运用 Canvas API 与 JavaScript 编程语言，编写一个简单的渲染引擎

* 缓动与物理引擎

运用 JavaScript 编程语言，编写一个简单的缓动算法和物理引擎

* 寻路算法

运用 JavaScript 编程语言，实现 AStar 寻路算法，并通过缓动与物理引擎，实现人物在场景中的寻路与移动

* 显示列表

将渲染引擎添加一个完整的显示列表

* 人机交互

运用 JavaScript 编程语言，为渲染引擎添加鼠标事件捕获与处理的支持。

* 桌面客户端开发技术

使用桌面应用开发技术 Electron 界面渲染和本地文件访问

* 游戏引擎设计

 使用 Electron 实现一个简单的游戏引擎

 


## 教授方法与学习方法指导

教授方法：

课堂教学以讲授为主（课内22学时）实验教学为辅（课内10）。

课内讲授主要运用自顶向下的教学方法，引导学生了解一个游戏引擎的全貌，并逐步理解游戏引擎的底层原理。
并在这个过程中将面向对象程序设计、线性代数、离散数学、计算机图形学、数据结构与算法等先修课程知识融入到游戏引擎的理论课中。

实验教学主要运用自底向上为教学方法，引导学生动手实践，从零开始实现一个游戏引擎的基础核心功能。

学习方法：

巩固对学科基础课的理解，并能将其应用于实际工程场景中，在理论指导下进行实践。

课堂认真听课，积极思考，与老师良好互动。课后认真复习，不放过疑点，充分利用好教师资源和同学资源。
在完成作业的过程中深入理解概念，掌握方法的精髓和算法的核心思想，并加强动手能力和团队协作能力。

## 学时分配


| 章节        | 主要内容   | 讲课   | 习题| 实验 | 讨论 | 其他 | 合计
| :--------:   | :-----:  | :----:  |:----:  |:----:  |:----:  |:----:  |:----:  |
| 1     | 概论与基础知识 |   4     |-|-|-|-|4
| 2     |   游戏渲染原理   |   3   |-|1|-|-|4
| 3     |    游戏动画原理  |  3  |-|1|-|-|4
| 4     |    寻路算法    |  3  |-|1|-|-|4
| 5     |    显示列表架构    |  3  |-|1|-|-|4
| 6     |    人机交互    |  3  |-|1|-|-|4
| 7     |    面向对象编程原则    |  2  |-|-|-|-|2
| 8     |    游戏引擎客户端的实现    |  1  |-|5|-|-|6
| 合计     |      |  22  |-|10|-|-|32

注：课内10学时的实验时间不足以完成系统的设计与实现，学生还需要用更多的课外时间。


## 考试与成绩评定


课堂成绩 10% ， 作业成绩 90%。

课堂成绩主要反应学生的课堂表现、平时的信息接受、自我约束。

成绩评定的主要依据包括：课程的出勤情况、课堂的基本表现情况。


作业成绩主要反映学生对课堂知识的深入理解和实际运用，
考核学生对游戏引擎的基本概念，基本方法，和基本技术的掌握程度，
并运用这些知识，设计和实现一个游戏引擎的能力。


| 考核方式 | 所占比率（%）| 主要考核内容
| :--------: | :--------:   |:--------:   |
|课堂成绩| 10 | 课堂参与度考核，对应毕业要求6，并对毕业要求3、4、5有参考价值
|作业成绩| 90 | 实现系统的设计实现情况。对应毕业要求3、4、5


制定者：王泽

批准者：

2016年4月18日



 